New Code:

diff --git a/TMX/TMXPL.WebAPI/Controllers/UserTestService.cs b/TMX/TMXPL.WebAPI/Controllers/UserTestService.cs
index fb612d2fe..01dcc581a 100644
--- a/TMX/TMXPL.WebAPI/Controllers/UserTestService.cs
+++ b/TMX/TMXPL.WebAPI/Controllers/UserTestService.cs
@@ -13,6 +13,7 @@ using Microsoft.AspNetCore.DataProtection;
 using Microsoft.EntityFrameworkCore;
 using Microsoft.Extensions.Logging;
 using Org.BouncyCastle.Crypto.Generators;
+using System.Collections.Generic;

 namespace TMXPL.WebAPI.Controllers
 {
@@ -109,6 +110,30 @@ namespace TMXPL.WebAPI.Controllers
             }
             return null;
         }
+        public List<User> GetUsersByIds(List<int> ids)
+        {
+            //get users by ids and then check consent of each user
+            var users = _context.Users.Where(u => ids.Contains(u.Id)).ToList();
+            foreach (var user in users)
+            {
+                if (user.HasConsented)
+                {
+                    user.Email = _protector.Unprotect(user.Email);
+                }
+            }
+            return users;
+        }
+        public void GenerateAllPairs(List<User> users)
+        {
+            for (int i = 0; i < users.Count; i++)
+            {
+                for (int j = 0; j < users.Count; j++)
+                {
+                    string combinedEmails = users[i].Email + users[j].Email;
+                    // Perform operations with combinedEmails
+                }
+            }
+        }

         public static bool IsAboveForty(DateTime? dateOfBirth)
         {
~
~
~
~
